<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üå∫ AI –°–∏—Å—Ç–µ–º–∞ –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¶–≤–µ—Ç–æ—á–Ω—ã–º –ú–∞–≥–∞–∑–∏–Ω–æ–º</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-gradient">
        <div class="container">
            <a class="navbar-brand" href="/">
                <span style="font-size: 1.5rem;">üå∫</span> AI –¶–≤–µ—Ç–æ—á–Ω—ã–π –ú–∞–≥–∞–∑–∏–Ω
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="/">–ì–ª–∞–≤–Ω–∞—è</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/dashboard">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/database">–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-5">
        <div class="row">
            <div class="col-lg-8 mx-auto text-center">
                <h1 class="display-4 mb-4">üå∫ AI –°–∏—Å—Ç–µ–º–∞ –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¶–≤–µ—Ç–æ—á–Ω—ã–º –ú–∞–≥–∞–∑–∏–Ω–æ–º</h1>
                <p class="lead mb-4">–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å –º–∞—à–∏–Ω–Ω—ã–º –æ–±—É—á–µ–Ω–∏–µ–º –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–¥–∞–∂, —Ü–µ–Ω –∏ –∑–∞–ø–∞—Å–æ–≤</p>
                
                <div class="row mt-5">
                    <div class="col-md-4 mb-4">
                        <div class="card feature-card">
                            <div class="card-body">
                                <div class="feature-icon">ü§ñ</div>
                                <h5 class="card-title">AI –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è</h5>
                                <p class="card-text">–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ø—Ä–æ—Å–∞ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ü–µ–Ω</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-4 mb-4">
                        <div class="card feature-card">
                            <div class="card-body">
                                <div class="feature-icon">üìä</div>
                                <h5 class="card-title">Real-time Dashboard</h5>
                                <p class="card-text">–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-4 mb-4">
                        <div class="card feature-card">
                            <div class="card-body">
                                <div class="feature-icon">üíæ</div>
                                <h5 class="card-title">–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö</h5>
                                <p class="card-text">–ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–¥–∞–∂, –∑–∞–ø–∞—Å–æ–≤ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="mt-5">
                    <a href="/dashboard" class="btn btn-primary btn-lg me-3">
                        üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å Dashboard
                    </a>
                    <a href="/database" class="btn btn-outline-primary btn-lg">
                        üíæ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ë–î
                    </a>
                </div>
                
                <div class="mt-5">
                    <h4>üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–º—É–ª—è—Ü–∏–µ–π</h4>
                    <div class="btn-group mt-3" role="group">
                        <button id="startBtn" class="btn btn-success">
                            ‚ñ∂Ô∏è –°—Ç–∞—Ä—Ç
                        </button>
                        <button id="stopBtn" class="btn btn-danger">
                            ‚èπÔ∏è –°—Ç–æ–ø
                        </button>
                        <button id="resetBtn" class="btn btn-warning">
                            üîÑ –°–±—Ä–æ—Å
                        </button>
                        <button id="applyBtn" class="btn btn-info">
                            ü§ñ –ü—Ä–∏–º–µ–Ω–∏—Ç—å ML
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row mt-5">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">üìà –ë—ã—Å—Ç—Ä–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h5>
                        <div id="quickStats" class="text-center">
                            <p>–ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer mt-5 py-4 bg-light">
        <div class="container text-center">
            <p class="mb-0">üå∫ AI –°–∏—Å—Ç–µ–º–∞ –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¶–≤–µ—Ç–æ—á–Ω—ã–º –ú–∞–≥–∞–∑–∏–Ω–æ–º | GitHub Codespaces</p>
            <p class="text-muted small">–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ SQLite –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/scripts.js') }}"></script>
    <script>
        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–º—É–ª—è—Ü–∏–µ–π
        document.getElementById('startBtn').addEventListener('click', function() {
            fetch('/api/start', { method: 'POST' })
                .then(response => response.json())
                .then(data => alert(data.message));
        });
        
        document.getElementById('stopBtn').addEventListener('click', function() {
            fetch('/api/stop', { method: 'POST' })
                .then(response => response.json())
                .then(data => alert(data.message));
        });
        
        document.getElementById('resetBtn').addEventListener('click', function() {
            fetch('/api/reset', { method: 'POST' })
                .then(response => response.json())
                .then(data => alert(data.message));
        });
        
        document.getElementById('applyBtn').addEventListener('click', function() {
            fetch('/api/recommendations/apply', { method: 'POST' })
                .then(response => response.json())
                .then(data => alert(data.message));
        });
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function loadQuickStats() {
            fetch('/api/status')
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'running' || data.status === 'stopped') {
                        const stats = data.data;
                        document.getElementById('quickStats').innerHTML = `
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="stat-item">
                                        <div class="stat-value">${stats.budget.toLocaleString()} ‚ÇΩ</div>
                                        <div class="stat-label">–ë—é–¥–∂–µ—Ç</div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="stat-item">
                                        <div class="stat-value">${stats.today_profit.toLocaleString()} ‚ÇΩ</div>
                                        <div class="stat-label">–ü—Ä–∏–±—ã–ª—å —Å–µ–≥–æ–¥–Ω—è</div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="stat-item">
                                        <div class="stat-value">${stats.today_sales}</div>
                                        <div class="stat-label">–ü—Ä–æ–¥–∞–∂–∏ —Å–µ–≥–æ–¥–Ω—è</div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="stat-item">
                                        <div class="stat-value">${stats.inventory.length}</div>
                                        <div class="stat-label">–í–∏–¥–æ–≤ —Ü–≤–µ—Ç–æ–≤</div>
                                    </div>
                                </div>
                            </div>
                            <p class="mt-3"><small>–í—Ä–µ–º—è: ${stats.current_time} | –°—Ç–∞—Ç—É—Å: ${data.status === 'running' ? 'üü¢ –†–∞–±–æ—Ç–∞–µ—Ç' : 'üî¥ –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ'}</small></p>
                        `;
                    }
                })
                .catch(error => {
                    console.error('Error loading stats:', error);
                });
        }
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        loadQuickStats();
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
        setInterval(loadQuickStats, 10000);
    </script>
</body>
</html>